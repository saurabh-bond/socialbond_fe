(self.webpackChunkdemo1=self.webpackChunkdemo1||[]).push([[39],{9039:(e,t,s)=>{"use strict";s.r(t),s.d(t,{PaymentModule:()=>b});var r=s(8583),a=s(3679),n=s(3423),o=s(8319),i=s(2340),m=s(7716),c=s(1841);const d=i.N.apiUrl+"/payment";let l=(()=>{class e{constructor(e){this.http=e}getOrderDetails(e,t){return this.http.post(`${d}/createOrder`,{amount:100*e,currency:t})}savePaymentResponse(e,t){return e.success=t,this.http.post(`${d}/saveResponse`,e)}}return e.\u0275fac=function(t){return new(t||e)(m.LFG(c.eN))},e.\u0275prov=m.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var u=s(9699);function p(e,t){if(1&e&&(m.TgZ(0,"div",15),m._UZ(1,"i",42),m.TgZ(2,"span",43),m._uU(3),m.qZA(),m.qZA()),2&e){const e=t.$implicit;m.xp6(3),m.hij(" ",e," ")}}function g(e,t){if(1&e&&(m.TgZ(0,"div",44),m._UZ(1,"input",45),m.TgZ(2,"label",46),m._uU(3),m.ALo(4,"uppercase"),m.qZA(),m.qZA()),2&e){const e=t.$implicit;m.xp6(1),m.Q6J("id",e)("value",e),m.xp6(1),m.Q6J("for",e),m.xp6(1),m.hij(" ",m.lcZ(4,4,e)," ")}}function Z(e,t){1&e&&m._UZ(0,"i",47)}function f(e,t){1&e&&m._UZ(0,"i",48)}let y=(()=>{class e{constructor(e,t){this.payment=e,this.toastr=t,this.purchaseInstructions=["Minimum Purchase 100 credits = Rs 100","Credits Amount, 1 Credit=1 INR","Purchased amount will be shown in your credits","Use valid and real information about you","Don't use Proxies or VPN","Payments can be refused , please check your payment status before you open a ticket.","Purchases are final and we cannot refund credits back to your UPI, debit or credit card"],this.currencies=["inr","usd"],this.message="Payment not started",this.paymentOptions1={key:i.N.rzpKey,amount:"",currency:"",name:"SOCIALBOND",description:"Test Transaction",image:"https://example.com/your_logo",order_id:"",handler:this.paymentSuccessHandler,prefill:{name:"Saurabh Kumar",email:"talktosaurabhkr@gmail.com",contact:"8340248023",method:""},notes:{address:"Razorpay Corporate Office"},theme:{color:"#3399cc"},modal:{ondismiss:function(){console.log("Checkout form closed")}}}}ngOnInit(){this.submitBtn=document.getElementById("submitBtn"),this.paymentForm=new a.cw({currency:new a.NI("inr"),amount:new a.NI(100,[a.kI.required,a.kI.min(100)])})}onSubmit(){this.paymentForm.valid&&(this.submitBtn.setAttribute("data-kt-indicator","on"),this.initiatePayment()),console.log(this.paymentForm)}initiatePayment(){this.payment.getOrderDetails(this.paymentForm.value.amount,this.paymentForm.value.currency).subscribe(e=>{let t=e.data;this.paymentOptions1.amount=t.amount,this.paymentOptions1.currency=t.currency,this.paymentOptions1.order_id=t.id,this.doPayment()})}paymentSuccessHandler(e){this.toastr.info(`Payment is successful, Txn id: ${e.razorpay_payment_id}`),this.payment.savePaymentResponse(e,!0).subscribe(e=>{console.log("Details saved in db..."),this.toastr.success("Txn details captured, Credits will be added in sometime.")}),console.log("Success Handler Response",e),console.log("Response",e)}doPayment(){console.log("taking sometime"),console.log("payment options --",this.paymentOptions1);var e=new Razorpay(this.paymentOptions1);e.open(),e.on("payment.failed",function(e){alert("Failure Handler"),alert(e.error.code),alert(e.error.description),alert(e.error.source),alert(e.error.step),alert(e.error.reason),alert(e.error.metadata.order_id),alert(e.error.metadata.payment_id)}),this.submitBtn.removeAttribute("data-kt-indicator")}onPaymentSuccess(e){console.log("Payment is successful ...asdf...asdf")}}return e.\u0275fac=function(t){return new(t||e)(m.Y36(l),m.Y36(u._W))},e.\u0275cmp=m.Xpm({type:e,selectors:[["app-payment"]],hostBindings:function(e,t){1&e&&m.NdJ("payment.success",function(e){return t.onPaymentSuccess(e)},!1,m.Jf7)},decls:60,vars:5,consts:[[1,"card"],[1,"card-body","p-10","p-lg-15"],[1,"mb-13"],[1,"row","mb-12"],[1,"col-md-6","pe-md-10","mb-10","mb-md-0"],[1,"text-gray-800","fw-bolder","mb-4"],["class","d-flex mt-3",4,"ngFor","ngForOf"],[1,"col-md-6","ps-md-10","card-rounded","bg-primary","bg-opacity-5","p-10","mb-15"],[1,"m-0"],[3,"formGroup","ngSubmit"],[1,"separator","my-5"],[1,"row","fv-row","mb-7"],[1,"col-md-4","text-md-end"],[1,"fs-6","fw-bold","form-label","mt-3"],[1,"col-md-8"],[1,"d-flex","mt-3"],["class","form-check form-check-custom form-check-solid me-5",4,"ngFor","ngForOf"],[1,"required"],["ngbTooltip","Enter amount",1,"fas","fa-exclamation-circle","ms-1","fs-7"],[1,"col-md-8","position-relative"],["class","fas fa-rupee-sign position-absolute top-50 translate-middle-y ms-3",4,"ngIf"],["class","fas fa-dollar-sign position-absolute top-50 translate-middle-y ms-3",4,"ngIf"],["type","number","formControlName","amount","value","100","min","100",1,"form-control","ps-10"],[1,"row"],[1,"col-md-9","offset-md-3"],[1,"separator","mb-6"],[1,"d-flex","justify-content-end"],["type","reset","data-kt-ecommerce-settings-type","cancel",1,"btn","btn-light","me-3"],["type","submit","id","submitBtn",1,"btn","btn-info"],[1,"indicator-label"],[1,"indicator-progress"],[1,"spinner-border","spinner-border-sm","align-middle","ms-2"],[1,"card","mb-4","bg-light","text-center"],[1,"card-body","py-12"],["href","#",1,"mx-4"],["src","assets/media/svg/brand-logos/facebook-4.svg","alt","",1,"h-30px","my-2"],["src","assets/media/svg/brand-logos/instagram-2-1.svg","alt","",1,"h-30px","my-2"],["src","assets/media/svg/brand-logos/github.svg","alt","",1,"h-30px","my-2"],["src","assets/media/svg/brand-logos/behance.svg","alt","",1,"h-30px","my-2"],["src","assets/media/svg/brand-logos/pinterest-p.svg","alt","",1,"h-30px","my-2"],["src","assets/media/svg/brand-logos/twitter.svg","alt","",1,"h-30px","my-2"],["src","assets/media/svg/brand-logos/dribbble-icon-1.svg","alt","",1,"h-30px","my-2"],[1,"fa","fa-genderless","text-primary","fs-1"],[1,"fw-mormal","ps-3"],[1,"form-check","form-check-custom","form-check-solid","me-5"],["type","radio","formControlName","currency",1,"form-check-input",3,"id","value"],[1,"form-check-label",3,"for"],[1,"fas","fa-rupee-sign","position-absolute","top-50","translate-middle-y","ms-3"],[1,"fas","fa-dollar-sign","position-absolute","top-50","translate-middle-y","ms-3"]],template:function(e,t){1&e&&(m.TgZ(0,"div",0),m.TgZ(1,"div",1),m.TgZ(2,"div",2),m.TgZ(3,"div",3),m.TgZ(4,"div",4),m.TgZ(5,"h2",5),m._uU(6,"Please read before purchasing"),m.qZA(),m.YNc(7,p,4,1,"div",6),m.qZA(),m.TgZ(8,"div",7),m.TgZ(9,"h2",5),m._uU(10,"Buy Credits"),m.qZA(),m.TgZ(11,"div",8),m.TgZ(12,"form",9),m.NdJ("ngSubmit",function(){return t.onSubmit()}),m._UZ(13,"div",10),m.TgZ(14,"div",11),m.TgZ(15,"div",12),m.TgZ(16,"label",13),m.TgZ(17,"span"),m._uU(18,"Currency"),m.qZA(),m.qZA(),m.qZA(),m.TgZ(19,"div",14),m.TgZ(20,"div",15),m.YNc(21,g,5,6,"div",16),m.qZA(),m.qZA(),m.qZA(),m.TgZ(22,"div",11),m.TgZ(23,"div",12),m.TgZ(24,"label",13),m.TgZ(25,"span",17),m._uU(26,"Amount"),m.qZA(),m._UZ(27,"i",18),m.qZA(),m.qZA(),m.TgZ(28,"div",19),m.YNc(29,Z,1,0,"i",20),m.YNc(30,f,1,0,"i",21),m._UZ(31,"input",22),m.qZA(),m.qZA(),m.TgZ(32,"div",23),m.TgZ(33,"div",24),m._UZ(34,"div",25),m.TgZ(35,"div",26),m.TgZ(36,"button",27),m._uU(37,"Cancel"),m.qZA(),m.TgZ(38,"button",28),m.TgZ(39,"span",29),m._uU(40,"Buy"),m.qZA(),m.TgZ(41,"span",30),m._uU(42,"Please wait... "),m._UZ(43,"span",31),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.TgZ(44,"div",32),m.TgZ(45,"div",33),m.TgZ(46,"a",34),m._UZ(47,"img",35),m.qZA(),m.TgZ(48,"a",34),m._UZ(49,"img",36),m.qZA(),m.TgZ(50,"a",34),m._UZ(51,"img",37),m.qZA(),m.TgZ(52,"a",34),m._UZ(53,"img",38),m.qZA(),m.TgZ(54,"a",34),m._UZ(55,"img",39),m.qZA(),m.TgZ(56,"a",34),m._UZ(57,"img",40),m.qZA(),m.TgZ(58,"a",34),m._UZ(59,"img",41),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA()),2&e&&(m.xp6(7),m.Q6J("ngForOf",t.purchaseInstructions),m.xp6(5),m.Q6J("formGroup",t.paymentForm),m.xp6(9),m.Q6J("ngForOf",t.currencies),m.xp6(8),m.Q6J("ngIf","inr"===t.paymentForm.get("currency").value),m.xp6(1),m.Q6J("ngIf","usd"===t.paymentForm.get("currency").value))},directives:[r.sg,a._Y,a.JL,a.sg,o._L,r.O5,a.wV,a.qQ,a.Fj,a.JJ,a.u,a._],pipes:[r.gd],styles:[""]}),e})(),b=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=m.oAB({type:e}),e.\u0275inj=m.cJS({imports:[[r.ez,o.HK,a.UX,n.Bz.forChild([{path:"",component:y}])]]}),e})()}}]);